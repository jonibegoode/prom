<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{% block title %}promo-vert{% endblock %}</title>

    {% block stylesheets %}
        <link rel="stylesheet" href="//cdn.webix.com/edge/webix.css" type="text/css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href=" {{ asset('css/view.css') }}">
        <link rel="stylesheet" href=" {{ asset('css/jquery.simplefileinput.css') }}">
    {% endblock %}


</head>

<body>

<nav class="navbar navbar-toggleable-md navbar-light bg-faded">
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="{{ path('erp_homepage') }}">HOME</a>
    <ul class="nav navbar-nav">
        <li class="nav-item">
            <a class="nav-link" href="#">Trials <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Protocols</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Planning</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">PGE</a>
        </li>
    </ul>
</nav>

{{ dump() }}
<h1>HELLO WORLD</h1>

<div class="container main">

    <div class="row" id="infos-and-map">
        <div class="col">
            <div class="header flex" id="first-header">
                <h4>Main Information</h4>
            </div>
            <div class="row">

                <div class="col-md-8" id="infos">

                    <div class="field-groups">
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Protocol:</div>
                            <div class="value">17E FCUISK B01</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">code:</div>
                            <div class="value">17E FCUISK SP01</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Sponsor:</div>
                            <div class="value">ISK BIOSCIENCES</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Country:</div>
                            <div class="value">Spain</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Responsible:</div>
                            <div class="value">Marcos Lora</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Technician:</div>
                            <div class="value">Ra√∫l cozano</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">State:</div>
                            <div class="value">Pendiente de Comienzo</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Experimental Product:</div>
                            <div class="value">IBE 4022</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Kind of Trial:</div>
                            <div class="value">F-Fungicide</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Crop:</div>
                            <div class="value">CU-CUCURBITS</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Setting date:</div>
                            <div class="value">17/01/2017</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Country of Trial:</div>
                            <div class="value">Spain</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">CRO:</div>
                            <div class="value"></div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Effective Date:</div>
                            <div class="value">21/03/2017</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Confirmado CRO:</div>
                            <div class="value">NO</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Quotation confirmed:</div>
                            <div class="value">NO</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Invoiced First 50%:</div>
                            <div class="value">YES</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Farmer compensation:</div>
                            <div class="value">600</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Area/Village:</div>
                            <div class="value"></div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Poligon:</div>
                            <div class="value"></div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Parcela:</div>
                            <div class="value"></div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Anex V:</div>
                            <div class="value">NO</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Prevision for Starting Date:</div>
                            <div class="value"></div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Prevision for Finish Date:</div>
                            <div class="value"></div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Estimated date for Draft:</div>
                            <div class="value"></div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Date to send Draft:</div>
                            <div class="value"></div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Report available:</div>
                            <div class="value">NO</div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Date Report sent:</div>
                            <div class="value"></div>
                        </div>
                        <div class="field-group d-flex justify-content-between">
                            <div class="field">Final Report Shippment confirmed:</div>
                            <div class="value">NO</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4" id="map">
                    <div class="trial-location">
                        <iframe
                                width="100%"
                                height="450"
                                frameborder="0"
                                style="border:0"
                                src="https://www.google.com/maps/embed/v1/place?q=place_id:ChIJnY3tlZhy5kcRcnujmyShlUc&key=AIzaSyD5Wgt4AW-Nxx_f_85uiawBlF6FOXk84Qs"
                                allowfullscreen></iframe>
                    </div>

                    <div class="coordinates d-flex">
                        <div class="form-group row">
                            <label for="longitude" class="col-sm-3 col-form-label">longitude</label>
                            <div class="col">
                                <input type="text" class="form-control col-sm-10" id="longitude" placeholder=".col-2">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="latitude" class="col-sm-3 col-form-label" id="mc">Latitude</label>
                            <div class="col">
                                <input type="text" class="form-control col-sm-10" id="latitude" placeholder=".col-2">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row" id="interventions">
        <div class="col">
            <div class="header flex">
                <h4>Interventions</h4>
            </div>
            <div id="testA"></div>
        </div>
    </div>

    <div class="row" id="files">
        <div class="col">
            <div class="header flex">
                <h4>Files</h4>

            </div>
            <div class="row">
                <div class="col">
                    <div class="arm-file">
                        {#<div class="last">
                            <h5>Last ARM File (read only)</h5>
                            <ul class="d-flex">
                                <li>armfile.arm</li>
                                <li>12/12/2012</li>
                                <li><i class="fa fa-download" aria-hidden="true"></i></li>
                            </ul>
                        </div>#}
                        <div class="current">
                            <h5>ARM File</h5>
                            <ul class="d-flex">
                                {% for TrialArmFile in arm_file %}
                                    <li>{{ TrialArmFile.armName }}</li>
                                    {#<li>{{ TrialArmFile.updatedAt|date('Y-m-d') }}</li>#}
                                    {#<li><a href="{{ vich_uploader_asset(TrialArmFile, 'armFile') }}"><i class="fa fa-download" aria-hidden="true"></i></a></li>#}
                                    <li><a href="{{ path('erp_download_arm', { 'id': TrialArmFile.id }) }}"><i
                                                    class="fa fa-download" aria-hidden="true"></i></a></li>
                                {% endfor %}
                            </ul>
                        </div>
                        {#Ici on ins√®re le form pour l'upload des fichiers arm#}
                        <div class="row upload-form">
                            {{ form(form2) }}
                            {#{{ form_start(form2, {'attr': {'class': 'form-horizontal'}}) }}
                            {{ form_errors(form2) }}
                            {{ form_row(form2.armFile) }}
                            {{ form_widget(form2.save, {'attr': {'class': 'btn btn-primary'}}) }}
                            {{ form_end(form2) }}#}
                        </div>
                    </div>
                    <div class="protocole">
                        <h5>Protocoles</h5>
                        <div class="protocoles-list">
                            {% for TrialProtocolFile in list_of_protocol_files %}
                                <ul class="d-flex">
                                    <li>{{ TrialProtocolFile.protocolName }}</li>
                                    <li>12/12/2012</li>
                                    <li><a href="{{ vich_uploader_asset(TrialProtocolFile, 'protocolFile') }}"><i
                                                    class="fa fa-download" aria-hidden="true"></i></a></li>
                                    <li><a href="{{ path('erp_delete_protocol', { 'id': TrialProtocolFile.id }) }}"><i
                                                    class="fa fa-times" aria-hidden="true"></i></a></li>


                                </ul>
                            {% endfor %}
                            {#Ici on ins√®re le form pour l'upload des fichiers protocoles #}
                            <div class="upload-form">
                                {{ form(form3) }}
                                {#{{ form_start(form3, {'attr': {'class': 'form-horizontal'}}) }}
                                {{ form_errors(form3) }}
                                {{ form(form3.protocolFile) }}
                                {{ form_widget(form3.save, {'attr': {'class': 'btn btn-primary'}}) }}
                                {{ form_rest(form3) }}
                                {{ form_end(form3) }}#}

                            </div>
                        </div>

                    </div>
                </div>
                <div class="col">
                    <div class="images">
                    <div class="photos">
                        {% for Trialimage in list_of_images %}
                            <img src="{{ vich_uploader_asset(Trialimage, 'imageFile') }}"
                                 alt="{{ Trialimage.imageName }}"/>
                            {#<img src="{{ asset('images/{{ Trialimage.imageName}}') }}" alt="" class="img-thumbnail">#}
                        {% endfor %}
                    </div>
                    {#Ici on ins√®re le form pour l'upload des fichiers images #}
                    <div class="upload-form form-group">
                        {{ form(form1) }}
                        {#{{ dump(form) }}
                        {{ form_widget(form.imageFile, {'attr': {'class': 'btn btn-primary'}}) }}
                        {{ form_widget(form.save, {'attr': {'class': 'btn btn-primary'}}) }}#}
                        {#{{ form_start(form) }}
                        {{ form_errors(form) }}
                        {{ form_widget(form.imageFile) }}
                        #}{#{{ form_label(form.imageFile, 'Your Name', {'label_attr': {'class': 'test'}}) }}#}{#
                        {{ form_row(form.save, { 'label': 'Submit me' }) }}
                        {{ form_end(form) }}#}
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row" id="discussion">
        <div class="col">
            <div class="header flex">
                <h4>Discussion</h4>
            </div>

            <div class="row">
                <div class="col" id="with-technicians">
                    <div class="message-container">
                        <ul class="message-list">
                            {% for TrialDiscussionT in list_of_comments_with_technician %}
                                <li class="message">
                                    <div class="message-box">
                                        <div class="message-head">
                                            <span class="message-name by-author">{{ TrialDiscussionT.author }}</span>
                                            <span>{{ TrialDiscussionT.date|date() }}</span>
                                        </div>
                                        <div class="message-content">
                                            {{ TrialDiscussionT.comment }}
                                        </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="form-group">
                        {{ form(form5) }}
                    </div>
                </div>

                <div class="col" id="with-sponsor">
                    <div class="message-container">

                        <ul class="message-list">

                            {% for TrialDiscussionS in list_of_comments_with_sponsors %}
                                <li class="message">
                                    <div class="message-box">
                                        <div class="message-head">
                                            <span class="message-name by-author">{{ TrialDiscussionS.author }}</span>
                                            <span>{{ TrialDiscussionS.date|date() }}</span>
                                        </div>
                                        <div class="message-content">
                                            {{ TrialDiscussionS.comment }}
                                        </div>
                                    </div>
                                </li>
                            {% endfor %}

                        </ul>
                    </div>
                    <div class="form-group">
                        {{ form(form4) }}
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>


<footer>
    <p>The sky's the limit ¬© {{ 'now'|date('Y') }} and beyond.</p>
</footer>


{% block javascripts %}

    <script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="//cdn.webix.com/edge/webix.js" type="text/javascript"></script>
    <script src="{{ asset('js/jquery.simplefileinput.min.js') }}" type="text/javascript"></script>

    <script type="text/javascript">

        var searchbar = {
            view: "text",
            placeholder: "Type something to filter the grid",
            on: {
                onTimedKeyPress: function () {
                    var text = this.getValue().toLowerCase();
                    var table = $$("dtable");
                    var columns = table.config.columns;
                    table.filter(function (obj) {
                        for (var i = 0; i < columns.length; i++)
                            if (obj[columns[i].id].toString().toLowerCase().indexOf(text) !== -1) return true;
                        return false;
                    })
                }
            }
        };
        var excelexport = {
            view: "form",
            css: "toolbar",
            paddingY: 5,
            paddingX: 10,
            cols: [
                {
                    view: "button", value: "Add row", width: 120, click: function () {
                    $$('dtable').add({
                        id: 800,
                    });
                }
                },

                {
                    view: "button", value: "Delete row", width: 120, click: function () {
                    var id = $$('dtable').getSelectedId();
                    if (id)
                        $$('dtable').remove(id);
                }
                },


                {
                    view: "button", value: "Export to PDF", autowidth: true, click: function () {
                    webix.toPDF($$("dtable"), {
                        autowidth: true,
                    });
                }
                },
                {
                    view: "button", label: "Export to Excel", width: 120, click: function () {
                    webix.toExcel($$("dtable"));
                }
                }
            ]

        };
        var griddef = {
            view: "datatable",
            id: "dtable",
            columns: [
                {id: "rank", editor: "text", header: "", css: "rank", width: 50},
                {id: "title", editor: "text", header: "Film title", width: 200},
                {id: "year", editor: "text", header: "Released", width: 80},
                {id: "votes", editor: "text", header: "Votes", width: 100},
                {id: "title2", editor: "text", header: "Film title", width: 200},
                {id: "title3", editor: "text", header: "Film title", width: 200},
                {id: "title4", editor: "text", header: "Film title", width: 200},
                {id: "title5", editor: "text", header: "Film title", width: 200},
                {id: "title6", editor: "text", header: "Film title", width: 200},
            ],

            data: [
                {
                    id: 1,
                    title: "The Shawshank Redemption",
                    year: 1994,
                    votes: 678790,
                    rating: 9.2,
                    rank: 1,
                    title2: "azeazee",
                    title3: "azeazee",
                    title4: "azeazee",
                    title5: "azeazee",
                    title6: "azeazee",
                },
                {
                    id: 2,
                    title: "The Godfather",
                    year: 1972,
                    votes: 511495,
                    rating: 9.2,
                    rank: 2,
                    title2: "azeazee",
                    title3: "azeazee",
                    title4: "azeazee",
                    title5: "azeazee",
                    title6: "azeazee",
                },
                {
                    id: 3,
                    title: "The Shawshank Redemption",
                    year: 1994,
                    votes: 678790,
                    rating: 9.2,
                    rank: 3,
                    title2: "azeazee",
                    title3: "azeazee",
                    title4: "azeazee",
                    title5: "azeazee",
                    title6: "azeazee",
                },
                {
                    id: 4,
                    title: "The Shawshank Redemption",
                    year: 1994,
                    votes: 678790,
                    rating: 9.2,
                    rank: 4,
                    title2: "azeazee",
                    title3: "azeazee",
                    title4: "azeazee",
                    title5: "azeazee",
                    title6: "azeazee",
                },
                {
                    id: 5,
                    title: "The Shawshank Redemption",
                    year: 1994,
                    votes: 678790,
                    rating: 9.2,
                    rank: 5,
                    title2: "azeazee",
                    title3: "azeazee",
                    title4: "azeazee",
                    title5: "azeazee",
                    title6: "azeazee",
                },
                {
                    id: 6,
                    title: "The Shawshank Redemption",
                    year: 1994,
                    votes: 678790,
                    rating: 9.2,
                    rank: 6,
                    title2: "azeazee",
                    title3: "azeazee",
                    title4: "azeazee",
                    title5: "azeazee",
                    title6: "azeazee",
                },
                {
                    id: 7,
                    title: "The Shawshank Redemption",
                    year: 1994,
                    votes: 678790,
                    rating: 9.2,
                    rank: 7,
                    title2: "azeazee",
                    title3: "azeazee",
                    title4: "azeazee",
                    title5: "azeazee",
                    title6: "azeazee",
                },
            ],

            editable: true,
            autoheight: true,
            autowidth: true,
        };
        webix.ready(function () {
            grid = webix.ui({
                container: "testA",
                rows: [searchbar, griddef, excelexport],

            });
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('.inputarmfile').simpleFileInput({
                placeholder: 'Select your ARM file',
                buttonText: 'Select',
                allowedExts: ['xls', 'xlsx']
            });
        })
        $(document).ready(function () {
            $('.inputprotocolfile').simpleFileInput({
                placeholder: 'Select a protocol file',
                buttonText: 'Select',
                allowedExts: ['pdf']
            });
        })
        $(document).ready(function () {
            $('.inputimagefile').simpleFileInput({
                placeholder: 'Select an image',
                buttonText: 'Select',
                allowedExts: ['png', 'gif', 'jpg', 'jpeg']
            });
        })
    </script>

{% endblock %}

</body>
</html>